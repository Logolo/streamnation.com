// Generated by CoffeeScript 1.4.0
(function(){$(document).ready(function(){var e,t,n,r,i,s,o,u,a,f,l,c;l=1;i=$(window);n=[];o=0;c=0;e=$(".reloading-gif");t=$(".site-header");a=t.height();u=0;r=$(".background-video");$("#hero").addClass("active");setTimeout(function(){var e;return(e=r[0])!=null?e.play():void 0},parseInt(r.css("transition-delay"),10)*1e3);(s=function(){c=i.height();$("#hero").height(7+c-a);n=$("body").children("section").map(function(){return{selector:$(this),top:$(this).offset().top}});u=$(".site-footer").offset().top;return setTimeout(function(){return i.one("resize",s)},1e3)})();(f=function(){return setTimeout(function(){l=i.scrollTop();n[1]&&l>n[1].top-a?t.addClass("condensed"):l<=a&&t.removeClass("condensed");$.each(n,function(e,t){var r,i,s;r=((i=n[e+1])!=null?i.top:void 0)||u;if(t.top<=(s=l+c/2)&&s<r){t.selector.addClass("current");return o=e}return t.selector.removeClass("current")});e.each(function(){var e,t;t=$(this).data("src");e=$(this).data("delay")||0;if(!$(this).closest(".home-section").hasClass("current"))return $(this).hide().attr("src",null);if($(this).attr("src")==null)return $(this).delay(e).show(0).attr("src",t+"?"+Date.now())});return i.one("scroll",f)},100)})();return $(".next-tab, .back-to-top").click(function(e){var t,r;e.preventDefault();if($(this).hasClass("next-tab")){t=$(this).closest("section").index();r=n[t].top}else{t=0;r=0}return $("body").animate({scrollTop:r},function(){return o=t})})})}).call(this);