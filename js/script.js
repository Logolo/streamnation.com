// Generated by CoffeeScript 1.4.0
(function(){$(document).ready(function(){var e,t,n,r,i,s,o,u,a,f,l,c;l=1;i=$(window);n=[];o=0;c=0;e=$(".reloading-gif");t=$(".site-header");a=t.height();u=$(".site-footer").offset().top;r=$(".background-video");$("#hero").addClass("active");setTimeout(function(){return r[0].play()},parseInt(r.css("transition-delay"),10)*1e3);(s=function(){c=i.height();$("#hero").height(7+c-a);n=$("body").children("section").map(function(){return{selector:$(this),top:$(this).offset().top}});return setTimeout(function(){return i.one("resize",s)},1e3)})();(f=function(){return setTimeout(function(){l=i.scrollTop();l>n[1].top-a?t.addClass("condensed"):l<=a&&t.removeClass("condensed");$.each(n,function(e,t){var r,i,s;r=((i=n[e+1])!=null?i.top:void 0)||u;if(t.top<=(s=l+c/2)&&s<r){t.selector.addClass("current");o=e}else t.selector.removeClass("current");return t.selector.find(".next-tab, .back-to-top").toggleClass("sticky",l+c>r)});e.each(function(){var e,t;t=$(this).data("src");e=$(this).data("delay")||0;if(!$(this).closest(".home-section").hasClass("current"))return $(this).hide().attr("src",null);if($(this).attr("src")==null)return $(this).delay(e).show(0).attr("src",t+"?"+Date.now())});return i.one("scroll",f)},100)})();return $(".next-tab, .back-to-top").click(function(e){var t;e.preventDefault();$(this).hasClass("next-tab")?t=$(this).closest("section").index():t=0;return $("body").animate({scrollTop:n[t].top},function(){return o=t})})})}).call(this);